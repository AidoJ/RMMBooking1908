<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Client Health Intake Form - Rejuvenators Mobile Massage</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <img src="../booking/images/rejuvenators-logo-white.png" alt="Rejuvenators" class="logo">
      <h1>Client Health Intake Form</h1>
      <p class="subtitle">Please complete this form before your massage session</p>
    </div>

    <!-- Form Container -->
    <div class="form-container">
      <form id="intakeForm">
        <!-- Loading State -->
        <div id="loadingState" class="loading-state">
          <div class="spinner"></div>
          <p>Loading your booking details...</p>
        </div>

        <!-- Error State -->
        <div id="errorState" class="error-state" style="display: none;">
          <p id="errorMessage"></p>
        </div>

        <!-- Form Content -->
        <div id="formContent" style="display: none;">
          <!-- Booking Reference Info -->
          <div class="info-box">
            <p><strong>Booking ID:</strong> <span id="displayBookingId"></span></p>
          </div>

          <!-- Medications -->
          <div class="form-group">
            <label for="medications">Are you taking any medications? Please list your medications</label>
            <textarea id="medications" name="medications" rows="3" placeholder="List all current medications or write 'None'"></textarea>
          </div>

          <!-- Allergies -->
          <div class="form-group">
            <label for="allergies">Do you have any allergies? (oils, lotions, nuts, fruits, skin, etc.)</label>
            <textarea id="allergies" name="allergies" rows="3" placeholder="List all allergies or write 'None'"></textarea>
          </div>

          <!-- Pregnancy -->
          <div class="form-group">
            <label>Are you pregnant?</label>
            <div class="yes-no-buttons">
              <button type="button" class="yes-no-btn" data-field="pregnancy" data-value="no">No</button>
              <button type="button" class="yes-no-btn" data-field="pregnancy" data-value="yes">Yes</button>
            </div>
          </div>

          <div id="pregnancyDetails" class="conditional-section" style="display: none;">
            <div class="form-row">
              <div class="form-group">
                <label for="pregnancyMonths">How many months?</label>
                <input type="number" id="pregnancyMonths" name="pregnancyMonths" min="1" max="9" placeholder="1-9 months">
              </div>
              <div class="form-group">
                <label for="pregnancyDueDate">Due date</label>
                <input type="date" id="pregnancyDueDate" name="pregnancyDueDate">
              </div>
            </div>
          </div>

          <!-- Medical Supervision -->
          <div class="form-group">
            <label>Are you currently under medical supervision or receiving other medical interventions?</label>
            <div class="yes-no-buttons">
              <button type="button" class="yes-no-btn" data-field="medicalSupervision" data-value="no">No</button>
              <button type="button" class="yes-no-btn" data-field="medicalSupervision" data-value="yes">Yes</button>
            </div>
          </div>

          <div id="medicalSupervisionDetails" class="conditional-section" style="display: none;">
            <div class="form-group">
              <label for="medicalSupervisionText">Please describe</label>
              <textarea id="medicalSupervisionText" name="medicalSupervisionText" rows="3" placeholder="Describe your medical supervision or interventions"></textarea>
            </div>
          </div>

          <!-- Medical Conditions -->
          <div class="form-group">
            <label>Do any of the conditions below apply to you? (Select all that apply)</label>
            <div class="conditions-grid">
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Autoimmune disorder">
                <span>Autoimmune disorder</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Back / neck problems">
                <span>Back / neck problems</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Bleeding disorders">
                <span>Bleeding disorders</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Blood clots">
                <span>Blood clots</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Bursitis">
                <span>Bursitis</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Cancer">
                <span>Cancer</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Contagious condition">
                <span>Contagious condition</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Diabetes">
                <span>Diabetes</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Fibromyalgia">
                <span>Fibromyalgia</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Headaches / Vertigo / dizziness">
                <span>Headaches / Vertigo / dizziness</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Heart condition">
                <span>Heart condition</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Hypertension">
                <span>Hypertension</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Kidney disease">
                <span>Kidney disease</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Multiple sclerosis">
                <span>Multiple sclerosis</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Neurological condition">
                <span>Neurological condition</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Osteoporosis">
                <span>Osteoporosis</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Phlebitis">
                <span>Phlebitis</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Sciatica">
                <span>Sciatica</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Seizures">
                <span>Seizures</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Stroke">
                <span>Stroke</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Tendinitis">
                <span>Tendinitis</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="TMJ disorder">
                <span>TMJ disorder</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="medicalConditions" value="Varicose veins">
                <span>Varicose veins</span>
              </label>
            </div>
          </div>

          <!-- Broken Skin -->
          <div class="form-group">
            <label>Do you have any areas of broken skin? (e.g. rash, wounds)</label>
            <div class="yes-no-buttons">
              <button type="button" class="yes-no-btn" data-field="brokenSkin" data-value="no">No</button>
              <button type="button" class="yes-no-btn" data-field="brokenSkin" data-value="yes">Yes</button>
            </div>
          </div>

          <div id="brokenSkinDetails" class="conditional-section" style="display: none;">
            <div class="form-group">
              <label for="brokenSkinLocation">Where is the broken skin?</label>
              <textarea id="brokenSkinLocation" name="brokenSkinLocation" rows="2" placeholder="Describe the location"></textarea>
            </div>
          </div>

          <!-- Joint Replacement -->
          <div class="form-group">
            <label>Do you have any history of joint replacement surgery?</label>
            <div class="yes-no-buttons">
              <button type="button" class="yes-no-btn" data-field="jointReplacement" data-value="no">No</button>
              <button type="button" class="yes-no-btn" data-field="jointReplacement" data-value="yes">Yes</button>
            </div>
          </div>

          <div id="jointReplacementDetails" class="conditional-section" style="display: none;">
            <div class="form-group">
              <label for="jointReplacementText">Which joints?</label>
              <textarea id="jointReplacementText" name="jointReplacementText" rows="2" placeholder="Describe which joints"></textarea>
            </div>
          </div>

          <!-- Recent Injuries -->
          <div class="form-group">
            <label for="recentInjuries">Have you had any recent injuries or medical procedures in the past 2 years?</label>
            <textarea id="recentInjuries" name="recentInjuries" rows="3" placeholder="Please describe or write 'None'"></textarea>
          </div>

          <!-- Other Conditions -->
          <div class="form-group">
            <label for="otherConditions">Please describe any other injuries or health conditions</label>
            <textarea id="otherConditions" name="otherConditions" rows="3" placeholder="Any additional health information we should know or write 'None'"></textarea>
          </div>

          <!-- Disclaimer -->
          <div class="disclaimer">
            <strong>DISCLAIMER</strong><br>
            I am aware that undertaking massage therapy may involve some form of physical exertion or mild discomfort and as such I agree to undertake such activities at my own risk. I have read, answered and understood all the above questions and hereby verify the answers I have provided are true and correct. I waive any claim for injury, damage or accident however so caused arising out of a massage or related therapy given or set by Rejuvenators Mobile Massage or therapists subcontracted to Rejuvenators Mobile Massage, its directors, servants or agents in pursuance of my instructions.
          </div>

          <!-- Signature -->
          <div class="form-group">
            <label>Client Signature</label>
            <div class="signature-container">
              <canvas id="signatureCanvas" width="600" height="200"></canvas>
              <button type="button" id="clearSignature" class="btn-secondary">Clear Signature</button>
            </div>
            <p class="signature-help">Sign above using your mouse or finger</p>
          </div>

          <!-- Submit Button -->
          <div class="button-group">
            <button type="submit" id="submitBtn" class="btn-primary">Submit Health Intake Form</button>
          </div>

          <!-- Success Message -->
          <div id="successMessage" class="success-message" style="display: none;">
            <h3>✓ Form Submitted Successfully!</h3>
            <p>Thank you for completing your health intake form. Your therapist has been notified and will review it before your session.</p>
            <p>You can now close this page.</p>
          </div>
        </div>
      </form>
    </div>
  </div>

  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="js/intake-form.js"></script>
</body>
</html>
